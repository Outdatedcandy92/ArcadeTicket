<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="./src/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    
    <button id="SetBtn" onclick="window.location.href = 'index.html'">⚙️</button>
    <form id="formset">
        <div>
            <button id="toggleButton" type="button" class="button-on">Automatic</button>
        </div>
        <div>
            <input type="text" id="name" name="name" placeholder="Enter Shop URL">
        </div>

        <div>
            <select id="rewardlist" name="rewardlist">
                <option value='0'> Pile of stickers</option>
                <option value='1'> Sticker</option>
                <option value='2'> E-fidgets</option>
                <option value='3'> OpenAI credits</option>
                <option value='4'> Domain</option>
                <option value='5'> Good Sci-Fi Book</option>
                <option value='6'> Notebook</option>
                <option value='7'> Logic Analyzer</option>
                <option value='8'> USB-C Charger</option>
                <option value='9'> Breadboard</option>
                <option value='10'> Multimeter</option>
                <option value='11'> Arcade Ticket Counter</option>
                <option value='12'> Soldering iron</option>
                <option value='13'> Helping hands</option>
                <option value='14'> Raspberry Pi</option>
                <option value='15'> Pinecil</option>
                <option value='16'> YubiKey</option>
                <option value='17'> GitHub Keycaps</option>
                <option value='18'> Octocat</option>
                <option value='19'> Tuxedo pick set</option>
                <option value='20'> Leatherman Skeletool</option>
                <option value='21'> Wacom</option>
                <option value='22'> Logitech Mouse</option>
                <option value='23'> Samsung T7 1TB SSD</option>
                <option value='24'> Keychron</option>
                <option value='25'> Ryobi </option>
                <option value='26'> Ryobi </option>
                <option value='27'> Invertocat Backback</option>
                <option value='28'> Flipper</option>
                <option value='29'> Logitech</option>
                <option value='30'> Wacom</option>
                <option value='31'> Framework</option>
                <option value='32'> Nvidia Tesla P40 GPU</option>
                <option value='33'> Prusa</option>
                <option value='34'> Bambu Lab</option>
                <option value='35'> iPad</option>
                <option value='36'> Framework</option>
                <option value='37'> Quest 3</option>
                <option value='38'> Framework</option>
                <option value='39'> MacBook</option>
            </select>
        </div>
        
        <button type="submit" id="subbtn">Submit</button>
        
    </form>
    <a href="#"id="resetBtn" onclick="resetLocalStorage()">Having Issues? Reset LocalStorage</a>
    <script>
        function resetLocalStorage() {
            localStorage.clear();
            Swal.fire({
                title: 'LocalStorage Reset',
                text: 'LocalStorage has been reset',
                icon: 'success',
                confirmButtonText: 'OK'
            });
        }
        document.addEventListener('DOMContentLoaded', (event) => {
            const toggleButton = document.getElementById('toggleButton');
            const UserInput = document.getElementById('name'); // Assuming 'name' is the ID of your input element
            let isOn = true; // Initial state of the toggle

            toggleButton.addEventListener('click', () => {
                isOn = !isOn; // Toggle the state
                if (isOn) {
                    console.log('Automatic Mode');
                    toggleButton.textContent = 'Automatic';
                    toggleButton.classList.remove('button-off');
                    toggleButton.classList.add('button-on');
                    UserInput.placeholder = 'Enter Shop Url'; // Change placeholder for Automatic mode
                } else {
                    console.log('Manual Mode');
                    toggleButton.textContent = 'Manual';
                    toggleButton.classList.remove('button-on');
                    toggleButton.classList.add('button-off');
                    UserInput.placeholder = 'Enter Number Of Tickets You Have'; // Change placeholder for Manual mode
                }
            });
        });
        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const reward = document.getElementById('rewardlist').value;
            const toggleButtonValue = toggleButton.textContent;
            
            
            console.log('Toggle Button Value:', toggleButtonValue);
            console.log('Shop Url:', name);
            console.log('Reward:', reward);

            if (toggleButtonValue === 'Automatic') {
                localStorage.setItem('Automatic', 'true');

                if (name !== '') {
                localStorage.setItem('ShopUrl', name);
                }
                if (reward !== '') {
                    localStorage.setItem('Reward', reward);
                }

            } else {
                localStorage.setItem('Automatic', 'false');

                if (name !== '') {
                localStorage.setItem('Tickets', name);
                }
                if (reward !== '') {
                    localStorage.setItem('Reward', reward);
                }

            }


            Swal.fire({
                title: 'Settings Saved',
                text: 'You will be redirected to the main page',
                confirmButtonText: 'Cool'
            }).then(() => {
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>